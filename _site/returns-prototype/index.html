<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Returns-prototype</title>
  <meta name="description" content="Prototype
">

  <link href='https://fonts.googleapis.com/css?family=Lato:400,300,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://yorthehunter.github.io/returns-prototype/">
  <link rel="alternate" type="application/rss+xml" title="Prototype" href="http://yorthehunter.github.io/feed.xml">

  <script src="/bower_components/jquery/dist/jquery.min.js"></script>
</head>


  <body>
    <article>
  <style>
  .returned-item--1::after { background-image: url(/assets/images/item_1.png); }
  .returned-item--2::after { background-image: url(/assets/images/item_2.png); }
  .returned-item--3::after { background-image: url(/assets/images/item_3.png); }
  .returned-item--4::after { background-image: url(/assets/images/item_4.png); }
  .returned-item--5::after { background-image: url(/assets/images/item_5.png); }
</style>


<ul class="returned-items-list">
  <li class="returned-item returned-item--1" data-item-status="out" data-item-type="jewelry" data-item-override="" data-item-location="">
    <h2 class="returned-item__location">
      <div class="returned-item__location--primary"></div>
      <div class="returned-item__location--secondary"></div>
    </h2>
    <footer class="returned-item__footer">
      <aside class="returned-item__status"><span></span></aside>
    </footer>  </li>
  <li class="returned-item returned-item--4 returned-item--done" data-item-status="sold" data-item-override="" data-item-type="lg / xl" data-item-location="">
    <h2 class="returned-item__location">
      <div class="returned-item__location--primary"></div>
      <div class="returned-item__location--secondary"></div>
    </h2>
    <footer class="returned-item__footer">
      <aside class="returned-item__status"><span></span></aside>
    </footer>  </li>
  <li class="returned-item returned-item--2" data-item-status="out" data-item-type="md" data-item-override="" data-item-location="">
    <h2 class="returned-item__location">
      <div class="returned-item__location--primary"></div>
      <div class="returned-item__location--secondary"></div>
    </h2>
    <footer class="returned-item__footer">
      <aside class="returned-item__status"><span></span></aside>
    </footer>  </li>
  <li class="returned-item returned-item--3" data-item-status="out" data-item-type="md" data-item-override="rtv" data-item-location="">
    <h2 class="returned-item__location">
      <div class="returned-item__location--primary"></div>
      <div class="returned-item__location--secondary"></div>
    </h2>
    <footer class="returned-item__footer">
      <aside class="returned-item__status"><span></span></aside>
    </footer>  </li>
  <li class="returned-item returned-item--5 returned-item--done" data-item-status="sold" data-item-type="xs" data-item-override="" data-item-location="">
    <h2 class="returned-item__location">
      <div class="returned-item__location--primary"></div>
      <div class="returned-item__location--secondary"></div>
    </h2>
    <footer class="returned-item__footer">
      <aside class="returned-item__status"><span></span></aside>
    </footer>
  </li>
</ul>
<footer class="returns-banner">
</footer>

<script type="text/javascript">
  $(function(){
    set_location();
    item_status();

    if ($(".returned-item--current").length == 0) {
      $(".returned-item").addClass("returned-item--origin");
    }

    rearrange();

    $(".returned-item").click(function(){
      this_status = $(this).data("item-status");
      if(this_status == "out" || this_status == "sold"){
        $(this).data("item-status", "in");
        item_status();
      }
      else {
        item_status();
      }

      $(".returned-item").removeClass("returned-item--origin").removeClass("returned-item--current");
      $(this).addClass("returned-item--current returned-item--done");
      $(".returned-item--current").removeClass("returned-item--sold returned-item--lg returned-item--md returned-item--sm returned-item--xs returned-item--dmg returned-item--jewelry returned-item--clr returned-item--acc returned-item--rtv").addClass("returned-item--"+$(".returned-item--current").data("item-location"));

      rearrange($(this));
      color_banner();
    });

    $('body').bind('keypress', function(e) {
    	if(e.keyCode==49){
    		$(".returned-item--1").click();
    	}
    	else if(e.keyCode==50){
    		$(".returned-item--2").click();
    	}
    	else if(e.keyCode==51){
    		$(".returned-item--3").click();
    	}
    	else if(e.keyCode==52){
    		$(".returned-item--4").click();
    	}
    	else if(e.keyCode==53){
    		$(".returned-item--5").click();
    	}
    	else if(e.keyCode==55){
        set_dmg($(".returned-item--current"));
    	}
    	else if(e.keyCode==56){
        sold($(".returned-item--current"));
    	}
    	else if(e.keyCode==57){
        set_in($(".returned-item--current"));
    	}
    });

  });

  function set_dmg(e) {
    if (e.data("item-override") == "rtv" || e.data("item-override") == "clr") {
    }
    else if (e.data("item-override") == "dmg"){
    }
    else {
      e.data("item-override", "dmg");
      override = e.data("item-override");
      e.data("item-location", override);
      color_banner();
    }
    e.data("item-status", "in");
    write_location(e, e.data("item-type"));
    item_status();
  }

  function sold(e) {
    e.data("item-status", "sold");
    e.data("item-location", "sold");
    write_location(e, e.data("item-type"));
    item_status();
    color_banner();
  }

  function set_in(e) {
    if (e.data("item-override") == "rtv" || e.data("item-override") == "clr") {
      e.data("item-status", "in");
      set_location();
      write_location(e, e.data("item-type"));
      item_status();
      color_banner();
    }
    else {
      e.data("item-override", "");
      e.data("item-status", "in");
      set_location();
      write_location(e, e.data("item-type"));
      item_status();
      color_banner();
    }

  }

  function rearrange(e) {
    done_items = $(".returned-item--done");
    $(".returned-items-list").append(done_items, e, $(".returned-item:not('.returned-item--done')"));
  }

  function item_status() {
    $(".returned-item").each( function () {
      status = $(this).data("item-status");
      indicator = $(this).find(".returned-item__status");
      if (status == "sold") {
        indicator.removeClass("returned-item__status--undisclosed");
        indicator.find("span").text("$");
      }
      else if (status == "" || status == "out") {
        indicator.addClass("returned-item__status--undisclosed");
      }
      else if (status != "out") {
        indicator.removeClass("returned-item__status--undisclosed");
        indicator.find("span").text("âˆš");
      }
    });
  }

  function set_location() {
    $(".returned-item").each( function () {
      status   = $(this).data("item-status");
      override = $(this).data("item-override");
      type     = $(this).data("item-type");

      if (override == "rtv" || override == "clr") {
        $(this).data("item-location", override);
      }
      else if (override == "dmg") {
        $(this).data("item-location", override);
      }
      else if (type == "xs" || type == "sm" || type == "md" || type == "lg / xl") {
        $(this).data("item-location", type);
      }
      else {
        $(this).data("item-location", "jewelry");
      }

      write_location($(this), type);
    });
  }

  function write_location(e, t) {
    switch (e.data("item-location")) {
      case "sold":
        primary   = "SOLD";
        secondary  = "all";
        break;
      case "rtv":
        primary   = "R T V";
        secondary = "all";
        break;
      case "clr":
        primary   = "C L R";
        secondary = "all";
        break;
        break;
      case "dmg":
        primary   = "D M G";
        if (t != "jewelry"){
          secondary = "non-jewelry";
        }
        else {
          secondary = "jewelry";
        }
        break;
      case "tangled":
        primary   = "TANGLED";
        secondary = "jewelry";
        break;
      case "label":
        primary   = "LABEL";
        if (t != "jewelry"){
          secondary = "non-jewelry";
        }
        else {
          secondary = "jewelry";
        }
        break;
      case "lg / xl":
        primary   = "LG / XL";
        secondary = "apparel";
        break;
      case "md":
        primary   = "MD";
        secondary = "apparel";
        break;
      case "sm":
        primary   = "SM";
        secondary = "apparel";
        break;
      case "xs":
        primary   = "XS";
        secondary = "apparel";
        break;
      case "jewelry":
        primary   = "PURSES";
        secondary = "& scarves";
        break;
    }
    e.find(".returned-item__location--primary").text(primary);
    e.find(".returned-item__location--secondary").text(secondary);
    $(".returned-item--current").removeClass("returned-item--sold returned-item--lg returned-item--md returned-item--sm returned-item--xs returned-item--dmg returned-item--jewelry returned-item--clr returned-item--acc returned-item--rtv").addClass("returned-item--"+e.data("item-location"));
  }

  function color_banner() {
    current_location = $(".returned-item--current").data("item-location");
    $(".returns-banner").removeClass().addClass("returns-banner");

    setTimeout(function(){
      $(".returns-banner").addClass("returns-banner--"+current_location+" current");
    }, 200);
  }
</script>

</article>

  </body>

</html>
